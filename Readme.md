# Himu Operating System (HimuOS)

*Design and Implementation of a UEFI-based x86_64 User-Mode Operating System Kernel*

## 概要
本项目旨在从零开始设计并实现一个名为 "HimuOS" 的x86_64架构宏内核操作系统。

与传统的依赖Legacy BIOS的教学系统不同，本项目将专注于现代PC的UEFI (统一可扩展固件接口) 引导标准。系统将通过一个自定义的UEFI引导管理器 (HimuBootManager) 加载，该管理器负责初始化图形输出、获取内存映射，并最终将执行权交给内核。

内核将以x86_64长模式 (Long Mode) 运行，并实现现代操作系统的核心功能：

- 虚拟内存管理： 建立并启用四级页表，为内核和用户程序提供隔离的、平坦的虚拟地址空间。
- 特权级分离： 实现内核态 (Ring 0) 和用户态 (Ring 3) 的安全隔离。
- 系统调用： 设计并实现一个系统调用接口，作为用户态程序获取内核服务的唯一入口。
- 并发与调度： 在单处理器（AP）上实现一个基于优先级和时间片轮转（RR）的抢占式多任务调度器，支持内核级线程和上下文切换。
- 基础驱动： 支持基于GOP（UEFI）的彩色文本界面和键盘循环缓冲输入。

> [!IMPORTANT]
> 本项目**不包含**文件系统和多核（SMP）支持.

## HimuOS 参数说明

| 参数     | 说明                                        |
| ------ | ----------------------------------------- |
| 体系架构   | x86_64 (AMD64) 兼容微机或虚拟机                   |
| 内核架构   | 宏内核                                       |
| 引导     | 仅在支持统一可扩展固件接口(UEFI) 的微机上 使用 软驱或者光驱启动      |
| 启动方式   | 自定义UEFI Loader HimuBootManager + HBM 启动协议 |
| 内存模型   | 平坦地址模型；x64 长模式；48 位可寻址空间                  |
| 存储器    | 四级页表；页式虚拟存储器                              |
| 物理内存   | 最低 32MB, 最高 128GB                         |
| 特权级    | 支持内核态（Ring 0) 和用户态 (Ring 1)               |
| 用户空间   | 约 16 EB - 128 TB 地址空间                     |
| 并发与同步  | 支持；仅支持 单AP 下的多任务调度                        |
| 多线程    | 支持内核级线程调度                                 |
| 动态内存分配 | 支持                                        |
| 中断     | 支持中断                                      |
| 文件系统   | 不支持                                       |
| 显示器    | 支持彩色的文本界面                                 |
| 设备支持   | 标准 VGA 显示器、标准QWERTY键盘输入支持；MMIO 支持         |

## 版权与许可

本项目遵循 GNU 通用公共许可证 (GPL) 第 3 版或更高版本发布。您可以自由地使用、修改和分发本项目的代码。

本项目适用于本科及以上计算机科学与技术相关专业的教学与实验；

你可以自由使用本项目的代码，但禁止将本项目的代码用于商业用途。